

    <!doctype html>
    <html ng-app="TravApp">
      <head>
        <script src="lib/angular.js"></script>
        <script src="lib/angular-route.js"></script>
        <script src="travmain.js"></script>
        <script src="traveller-characters.js"></script>
        <script src="traveller-skills.js"></script>
        <script src="diceRoller.js"></script>
        <script src="ship-management.js"></script>
       
        <!--<link rel="stylesheet" href="travmain.css">-->
            <!-- Bootstrap -->
   		<link href="lib/bootstrap-combined.min.css" rel="stylesheet">
      </head>
      <body style="margin-left:8px">
      <section>
      	<ul class="nav nav-pills">
      	<li> <a href="#/roll">Roll Test</a> </li> 
        <li> <a href="#/characters">Character Test</a></li>
        <li> <a href="#/shipManagement">Ship Management</a></li>
        </ul>
      </section>
     
        <br><br>
         <div ng-view></div>
      </body>
      
<!----------------------------------Ship Manager View-------------------------->

<script type="text/ng-template" id="shipMan.view">

	<h2>Ship Management</h2>
	
</script>

<!------------------------------ Character view ------------------------------->
<script type="text/ng-template" id="characters.view">
<style type="text/css">
h3 {
   background:lightsteelblue;
   padding: 0;
   margin: 0;
   vertical-align: middle;
}
input[type="number"].skillValueInput {
   width: 35px;
   padding: 0;
   margin: 0;
}
.deleteButton {
   padding: 3px;
   border: solid 3px black;
   background: red;
   color: white;
   float: right;
   cursor: pointer
}
.bgDimGray {
   background-color: DimGray;
}
.specialty {
   padding-left: 15px;
   cursor: default;
}
.skill {
   cursor: pointer;
}
.skillValue {
   cursor: pointer;
   padding-right: 10px;
}
.learnedSkill {
   background: LightGray;
}
#characteristicsTable col:nth-child(2),col:nth-child(6n+5),col:nth-child(6n+6),col:nth-child(6n+7) {
   background: LightGray;
}
#characteristicsTable td {
   width: 25px;
   border: solid black 1px;
}
</style>
  <!-- TODO: refactor this page to move logic out of the view, and view out of the model -->
  <ul class="nav nav-tabs">
    <li ng-repeat="character in characterList" ng-class="{active: isActive(character.id)}" ng-click="selectCharacter(character.id)"><a style="cursor:default">{{character.name}}</a></li>
    <li><a style="cursor:pointer" ng-click="addCharacter()">Create New Character</a></li>
  </ul>

  <span ng-if="characterList.length > 0"> <!-- Hide the character display if no characters exist -->

  
    <form>
      <h3>Identity</h3>
      <span class="deleteButton" ng-click="deleteCharacter(selectedCharacter.id)"><h4>DELETE</h4></span>
      <table>
        <tr><td><h4>Name</h4></td><td><input ng-model="selectedCharacter.name"></td></tr>
        <tr><td><h4>Age</h4></td><td><input ng-model="selectedCharacter.age"></td></tr>
        <tr><td><h4>Homeworld</h4></td><td><input ng-model="selectedCharacter.homeworld"></td></tr>
        <tr><td><h4>Race</h4></td><td><input ng-model="selectedCharacter.race"></td></tr>
        <tr><td><h4>Racial Traits</h4></td><td><input ng-model="selectedCharacter.racialTraits"></td></tr>
      </table>
    </form>

    <h3>Characteristics</h3>
    Click on a box to set the characteristic score
    <table id="characteristicsTable">
      <col><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col>
      <tr align=center>
        <td align=right>Modifier</td>
        <td>-3</td><td colspan=2>-2</td><td colspan=3>-1</td><td colspan=3>+0</td><td colspan=3>+1</td><td colspan=3>+2</td>
        <td>+3</td>
      </tr>
      <tr align=center>
        <td align=right>Score</td>
        <td ng-repeat='val in [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]'>{{val}}</td>
      </tr>
      <tr align=center ng-repeat='stat in ["Str","Dex","End","Int","Edu","Soc"]'>
        <td align=right>{{stat}}</td>
        <td ng-repeat='val in [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]' style="cursor:pointer" ng-click="selectedCharacter[stat]=val" ng-class="{bgDimGray: selectedCharacter[stat]>=val}"></td>
      </tr>
    </table>
  
    <br>
    <form>
      <h3>Armour</h3>
      <table>
        <tr><td><h4>Type</h4></td><td><input ng-model="selectedCharacter.armourType"></td></tr>
        <tr><td><h4>Rating</h4></td><td><input ng-model="selectedCharacter.armourRating"></td></tr>
        <tr><td><h4>Special Notes</h4></td><td><input ng-model="selectedCharacter.armourSpecialNotes"></td></tr>
      </table>
    </form>

  <!-- TODO: make sure skills are always sorted properly (browsers aren't required to follow the order in the array) -->
    <form>
      <h3>Skills</h3>
      Click on a skill to learn/forget it. Click on the skill level to change it.
      <table>
        <tr ng-repeat="skill in skillList" ng-if="skill.displayMe()" ng-class="{learnedSkill: skill.hasBeenLearned}">
          <td><h4><span ng-class="{specialty:skill.isSpecialty,skill:!skill.isSpecialty}" ng-click="skill.toggleMe()">{{skill.name}}</span></h4></td>
          <td ng-if="skill.showValue()" style="padding-left:10px">
            <input ng-if="skill.editingInProgress()" traveller-autofocus class="skillValueInput" id="{{skill.name}}" type="number" min="0" max="20" value="{{skill.value}}" ng-model="skill.value" ng-blur="skill.stopEditing()">
            <h4><span ng-if="!skill.editingInProgress()" class="skillValue" ng-click="skill.startEditing()">{{skill.value}}</span></h4>
          </td>
          <td ng-if="!skill.showValue()"></td> <!-- else case for previous ng-if so we still have enough cells on unlearned or parent rows -->
        </tr>
      </table>
    </form>

    <form>
      <h3>Finances</h3>
      <table>
        <tr><td><h4>Pension</h4></td><td>Cr. <input type="number" class="moneyInput" step="2000" min="10000"></td></tr>
      </table>
    </form>

  </span>

</script>


<!----------------------------------Roller View-------------------------->

<script type="text/ng-template" id="roll.view">
  <h2>Roll</h2>
        <div>
        	
        	<form ng-submit="roller.roll()">
            	<input type="text" ng-model="roller.numdice" size="1" placeholder="Count">
            	d<input type="text" ng-model="roller.sides" size="1" placeholder="Sides">
            	<input class="btn-primary" type="submit" value="Roll">
          	</form>
          	
          	<form ng-submit="roller.d66()">
          	<input class="btn-primary" type="submit" value="d66">
          	</form>
          	
          	<span>Total: {{roller.result.total}}</span>
          	<br>
        
        <span>Individual Rolls:</span>  	
        <ul class="list-group">
        	<li class="list-group-item" ng-repeat="roll in roller.result.rolls track by $index">
        	<span> {{roll}} </span>
        	</li>
        </ul> 
        
        <h2>Throw/Check</h2>
        <ul class="list-group">
            <li class="list-group-item" ng-repeat="dm in roller.dms">
              <input type="checkbox" ng-model="dm.include">
              <span class="done-{{!dm.include}}">{{dm.desc}} : {{dm.value}}</span>
            </li>
          </ul>
          <form ng-submit="roller.addDM()">
            <input type="text" ng-model="roller.dmtext"  size="30"
                   placeholder="add new DM description">
            <input type="number" ng-model="roller.dmvalue"  size="3"
                   placeholder="0">
            <input class="btn-primary" type="submit" value="add">
          </form>
         	

         <form ng-submit="roller.dicethrow()">
         
         <!--	<select ng-model="roller.currentdifficulty">
        		<option ng-repeat="option in roller.difficulties" value="{{option.value}}">{{option.name}}</option>
         -->
        	<select name="mySelect" id="mySelect"
     			 ng-options="option.name for option in roller.difficulties track by option.value"
      			ng-model="roller.currentdifficulty"></select>
        	<input type="submit" value="Throw">
         </form>
         Throw Result:
         {{roller.throwresult}}
        </div>
</script>        

</html>

