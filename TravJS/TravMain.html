<!DOCTYPE html>
<html ng-app="TravApp" lang="en">
  <head>
    <!--angular-->
    <script src="lib/angular.js"></script>
    <script src="lib/angular-route.js"></script>
    <script src="lib/angular-sanitize.js"></script>
    <!--ui bootstrap-->
    <script src="lib/ui-bootstrap-tpls-0.14.3.js"></script>
    <!--Bootstrap-->
    <link href="lib/bootstrap.css" rel="stylesheet">
    <!--ui-select-->
    <script src="lib/ui-select/select.js"></script>
    <link href="lib/ui-select/select.css" rel="stylesheet">
    <!--Stuff we wrote-->
    <script src="travmain.js"></script>
    <script src="traveller-alerts.js"></script>
    <script src="traveller-characters.js"></script>
    <script src="traveller-skills.js"></script>
    <script src="traveller-data-storage.js"></script>
    <script src="traveller-app-config.js"></script>
    <script src="diceRoller.js"></script>
    <script src="ship-management.js"></script>
    <script src="random-tables.js"></script>
    <script src="datatables.js"></script>
    <script src="passengertables.js"></script>
    <script src="decoder.js"></script>
    <link rel="stylesheet" href="travmain.css">

    <!-- bootstrap layout thing -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

  </head>
  <body style="margin-left:8px">


    <section>
      <span ng-controller="alertsController as alerts">
        <uib-alert ng-repeat="alert in alerts" type="{{alert.type}}" close="clearAlert($index)">{{alert.msg}}</uib-alert>
      </span>
      <div class="container"> <!-- Main bootstrap container-->
        <ul class="nav nav-pills">
          <li> <a href="#/roll">Roll Test</a> </li>
          <li> <a href="#/characters">Characters</a></li>
          <li> <a href="#/shipManagement">Ship Management</a></li>
          <li> <a href="#/random">Random Generators</a></li>
          <li> <a href="#/decoder">Decoder</a></li>
          <li> <a href="#/config">Config</a></li>
        </ul>
      </div>
    </section>
    <div ng-view></div>
  </body>

<!------------------------------ Alert Template ------------------------------->
  <script type="text/ng-template" id="alert.view">
    <span class="alert" role="alert">
      <span ng-transclude></span>
    </span>
  </script>


<!----------------------------------Ship Manager View-------------------------->
  <!---------- Accordion: TBD ----------->
  <script type="text/ng-template" id="shipman.accordion.TBD.view">
    TBD
  </script>

  <!---------- Accordion: Manual Operations ----------->
  <script type="text/ng-template" id="shipman.accordion.manualOps.view">
    <div>
      <form ng-submit="shipMan.manualLog()" class="form-inline">
        <input type="textarea"  class="form-control" ng-model="shipMan.logText" size="40" placeholder="New log entry">
        <br>
        <input type="number" class="form-control" ng-model="shipMan.inputYear" size="4" placeholder="Year" >
        <input type="number" class="form-control" ng-model="shipMan.inputDate" size="4" placeholder="Date">
        <input type="number" class="form-control" ng-model="shipMan.inputTimeElapsed" size="4" placeholder="Elapsed time">
        <input class="btn btn-default btn-primary" type="submit" value="Log">
      </form>
    </div>
    <hr>
    <div>
      <form ng-submit="shipMan.manualCargoAdd()" class="form-inline">
        <input type="textarea"  class="form-control" ng-model="shipMan.addCargoType" size="30" placeholder="Cargo Text">
        <input type="number" class="form-control" ng-model="shipMan.addCargoTons" size="10" placeholder="Tons">
        <input type="number" class="form-control" ng-model="shipMan.addPrice" size="10" placeholder="Cr/Ton">
        <input type="number" class="form-control" ng-model="shipMan.inputTimeElapsed" size="4" placeholder="Elapsed time">
        <input class="btn btn-default btn-primary" type="submit" value="Add Cargo">
      </form>
    </div>
    <hr>
    <div class="row">
      <div class="col-md-8">
        <ui-select theme="bootstrap" ng-model="shipMan.cargoToDelete">
          <ui-select-match placeholder="Select cargo...">
            <div class="row">
              <div class="col-md-12">
                <strong>{{$select.selected.detail}}</strong><small> {{$select.selected.type}}</small>
              </div>
            </div>
          </ui-select-match>
          <ui-select-choices repeat="acargo in shipMan.log.status.cargo">
            <div class="row">
              <div class="col-md-12">
                <strong>{{acargo.detail}}</strong><small> {{acargo.type}}</small>
              </div>
              <div class="col-md-12">
                <small>{{acargo.tons}} dT @ Cr. {{acargo.paid}} / dT = Cr. {{acargo.paid*acargo.tons}}</small>
              </div>
            </div>
          </ui-select-choices>
        </ui-select>
      </div>
      <div class="col-md-4">
        <button class="btn btn-primary" type="button" ng-click="shipMan.manualCargoDelete()">Delete Cargo</button>
      </div>
    </div>
    <hr>
    <div>
      <form ng-submit="shipMan.manualCredits()" class="form-inline">
        <input type="number" class="form-control" ng-model="shipMan.addMoney" size="10" placeholder="Cr">
        <input type="text" class="form-control" ng-model="shipMan.addMoneyDesc" size="20" placeholder="Reason">
        <input type="number" class="form-control" ng-model="shipMan.inputTimeElapsed" size="4" placeholder="Elapsed time">
        <input class="btn btn-default btn-primary" type="submit" value="Add">
      </form>
    </div>
    <hr>
    <div>
      Set Date:
      <form ng-submit="shipMan.manualSetDate()" class="form-inline">
        <input type="number" class="form-control" ng-model="shipMan.inputYear" size "4" placeholder="year">
        <input type="number" class="form-control" ng-model="shipMan.inputDate" size "4" placeholder="date">
        <input class="btn btn-default btn-primary" type="submit" value="Set">
      </form>
    </div>
  </script>
  
 <!---------- Accordion: Jump -> Astrogation ----------->
  <script type="text/ng-template" id="shipman.accordion.jump.astrogation.view">
	       TODO: ext-factor of jump distance
	        <trav-skill-check-dm ng-model="shipman.AstrogationDM"
                             ng-attr-skills="['Astrogation']"
                             ng-attr-characteristics="['Edu']"
                             ng-attr-difficulty="'Easy'"
                             ng-attr-ext-factors="[]">
        </trav-skill-check-dm>
  </script>
  
   <!---------- Accordion: Jump -> Divert Power ----------->
  <script type="text/ng-template" id="shipman.accordion.jump.divertpower.view">

	        <trav-skill-check-dm ng-model="shipman.divertpowerDM"
                             ng-attr-skills="['Jump Drive (J-Drive)']"
                             ng-attr-characteristics="['Edu']"
                             ng-attr-difficulty="'Average'"
                             ng-attr-ext-factors="[]">
        </trav-skill-check-dm>
  </script>

   <!---------- Accordion: Visit Gas Giant -> Skim ----------->
  <script type="text/ng-template" id="shipman.accordion.visitGasGiant.skim.view">

	     <trav-skill-check-dm ng-model="shipman.skimDM"
 							 ng-attr-skills="['Small Craft','Spacecraft']"
                             ng-attr-characteristics="['Dex']"
                             ng-attr-difficulty="'Average'"
                             ng-attr-ext-factors="[]">
        </trav-skill-check-dm>
  </script>


  <!---------- Accordion: Destinations -> Passengers ----------->
  <script type="text/ng-template" id="shipman.accordion.destinations.passengers.view">
	
	
	<button class="btn btn-primary" type="button" ng-click="shipMan.shipManshowHuntForPassengersBox=!shipMan.shipManshowHuntForPassengersBox">Roll to round up extra passengers</button>
	<div ng-show="shipManshowHuntForPassengersBox" style="margin-bottom:10px">
	  <trav-skill-check-dm ng-model="shipman.skimDM"
                            ng-attr-skills="['Carouse','Streetwise']"
                             ng-attr-characteristics="['Int','Soc']"
                             ng-attr-difficulty="'Average'"
                             ng-attr-ext-factors="[]">
        </trav-skill-check-dm>
	</div>
	 <form ng-submit="shipMan.generateAvailablePassengers()" class="form-inline">
        <input class="btn btn-default btn-primary" type="submit" value="Generate">
        
    {{shipMan.availablePassengers}}
  </script>

  <!---------- Accordion: Buy Trade Goods ----------->
  <script type="text/ng-template" id="shipman.accordion.buyTradeGoods.view">
    <div ng-if="!shipMan.tripData.departureWorld">
      You must select a departure world before you can purchase trade goods.
    </div>
    <div ng-if="shipMan.tripData.departureWorld">
      <strong style="margin-right:5px">Supplier</strong>
      <div class="btn-group" style="margin-bottom:10px">
        <label class="btn btn-primary" ng-model="shipMan.buyTradeGoods.supplier" uib-btn-radio="shipMan.buyTradeGoods.suppliers['standard']">Standard</label>
        <label class="btn btn-primary" ng-model="shipMan.buyTradeGoods.supplier" uib-btn-radio="shipMan.buyTradeGoods.suppliers['commonGoods']">Common Goods</label>
        <label class="btn btn-primary" ng-model="shipMan.buyTradeGoods.supplier" uib-btn-radio="shipMan.buyTradeGoods.suppliers['blackMarket']">Black Market</label>
        <label class="btn btn-primary" ng-model="shipMan.buyTradeGoods.supplier" uib-btn-radio="shipMan.buyTradeGoods.suppliers['morallyNeutral']">Morally Neutral</label>
        <!-- online only available on worlds with TL >= 8 -->
        <label ng-if="shipMan.tripData.departureWorld.UWPsplit.TL >= 8" class="btn btn-primary" ng-model="shipMan.buyTradeGoods.supplier" uib-btn-radio="shipMan.buyTradeGoods.suppliers['online']">Online</label>
      </div>
      <br>
      <strong style="margin-right:5px">Assistance in Local Area</strong>
      <div class="btn-group" style="margin-bottom:10px">
        <label class="btn btn-primary" ng-model="shipMan.buyTradeGoods.assistant" uncheckable uib-btn-radio="'contact'">Contact</label>
        <label class="btn btn-primary" ng-model="shipMan.buyTradeGoods.assistant" uncheckable uib-btn-radio="'ally'">Ally</label>
      </div>
      <div style="margin-bottom:10px">
        <button class="btn btn-primary" type="button" ng-click="showFindSupplierBox=!showFindSupplierBox">Roll to Find Supplier</button>
        <strong style="margin-left:5px;margin-right:5px">OR</strong>
        <button ng-disabled="!shipMan.buyTradeGoods.supplier.guideCanFind" class="btn btn-primary" type="button" ng-click="shipMan.buyTradeGoods.hireGuideForSupplier()">Hire Guide</button>
      </div>
      <div ng-show="showFindSupplierBox" style="margin-bottom:10px">
        <trav-skill-check-dm ng-model="shipMan.buyTradeGoods.findSupplierResult"
                             ng-attr-skills="shipMan.buyTradeGoods.supplier.skillCheck.skills"
                             ng-attr-characteristics="shipMan.buyTradeGoods.supplier.skillCheck.characteristics"
                             ng-attr-difficulty="shipMan.buyTradeGoods.supplier.skillCheck.difficulty"
                             ng-attr-ext-factors="[shipMan.buyTradeGoods.externalFactors.findSupplier.starport[shipMan.tripData.departureWorld.UWPsplit.starport],
                                                   shipMan.buyTradeGoods.externalFactors.findSupplier.assistant[shipMan.buyTradeGoods.assistant],
                                                   shipMan.buyTradeGoods.externalFactors.findSupplier.suppliersFound]"
                             ng-attr-require-all="true"
                             ng-attr-on-roll="shipMan.buyTradeGoods.onFindSupplierRoll()">
        </trav-skill-check-dm>
      </div>
      <div ng-if="shipMan.buyTradeGoods.findSupplierResult">
         Result: {{shipMan.buyTradeGoods.findSupplierResult.roll.summary}}
      </div>
    </div>
  </script>

  <!---------- Accordion: Finalize Loadout ----------->
  <script type="text/ng-template" id="shipman.accordion.finalizeLoadout.view">
    Calculate risk vs. reward score, roll shipping hazards
  </script>

  <!---------- Accordion: JumpSpace ----------->
  <script type="text/ng-template" id="shipman.accordion.jumpSpace.view">
    Time taken in jump?
  </script>


  <!---------- Ship manager main view ----------->
  <script type="text/ng-template" id="shipMan.view">
    <br><br>

    <div class="container" style="width:100%">

      <div class="row">

        <div class="col-md-3">{{shipMan.partyShip.name}} current status <br> current / total (open):
          <pre>
Cargo: {{shipMan.log.status.totalCargo()}} / {{shipMan.partyShip.maxcargo}} ({{shipMan.partyShip.maxcargo - shipMan.log.status.totalCargo()}})
Smuggle: TODO?
Fuel: {{shipMan.log.status.fuel}} / {{shipMan.partyShip.maxfuel}} ({{shipMan.partyShip.maxfuel - shipMan.log.status.fuel}})
Staterooms: {{shipMan.partyShip.crew/2 + shipMan.log.status.highpass + shipMan.log.status.midpass}} / {{shipMan.partyShip.staterooms}} ({{shipMan.partyShip.staterooms - (shipMan.partyShip.crew/2 + shipMan.log.status.highpass + shipMan.log.status.midpass)}})
Crew: {{shipMan.partyShip.crew/2}}, High: {{shipMan.log.status.highpass}}, Mid: {{shipMan.log.status.midpass}}
Low Berths: {{shipMan.log.status.lowpass}} / {{shipMan.partyShip.maxlow}} ({{shipMan.partyShip.maxlow - shipMan.log.status.lowpass}})
Last Payment: {{shipMan.log.status.lastPayment}}
Due: {{shipMan.partyShip.monthlypayment}} Cr on {{shipMan.log.status.dueDate().toString()}} ({{shipMan.log.status.daysUntilMortgage()}})
Cash: {{shipMan.log.status.cash}} Cr.
Cargo Value:{{shipMan.log.status.totalCargoValue()}} Cr.
Maint holdback: {{shipMan.partyShip.monthlymaint}} Cr. per 28 days
Maint fund: {{shipMan.log.status.maintFund}} Cr. / {{shipMan.partyShip.annualmaint}} Cr. ({{shipMan.partyShip.annualmaint - shipMan.log.status.maintFund}} Cr.)
Maint date: 1106:001 ({{shipMan.log.status.daysUntilMaint()}})

Turret:BL,BL,S
Turret:BL,BL,S

Pilot: -1 DM
          </pre>

          Cargo Bay
          <ul class="list-group">
            <li class="list-group-item" ng-repeat="acargo in shipMan.log.status.cargo track by $index">
              <span> {{acargo.type}}({{acargo.detail}}) paid {{acargo.paid}}[{{acargo.paid*acargo.tons}}] - {{acargo.tons}} dT </span>
            </li>
          </ul>
        </div>

        <div class="col-md-6">

          <div class="row">
            <div class="col-md-6">
              <h4>Departure</h4>
              <ui-select theme="bootstrap" ng-model="shipMan.tripData.departureWorldSearchResults" on-select="shipMan.refreshArrivalWorlds()" on-remove="shipMan.refreshArrivalWorlds()">
                <ui-select-match placeholder="Select departure...">{{$select.selected.World.Name}}</ui-select-match>
                <ui-select-choices repeat="world in shipMan.departureWorlds" refresh="shipMan.refreshDepartureWorlds($select.search)" refresh-delay="0">
                  <span ng-bind-html="world.World.Name | highlight: $select.search"></span>
                </ui-select-choices>
              </ui-select>
            </div>
            <div class="col-md-6">
              <h4>Arrival</h4>
              <ui-select theme="bootstrap" ng-model="shipMan.tripData.arrivalWorld">
                <ui-select-match placeholder="Select arrival...">{{$select.selected.Name}}</ui-select-match>
                <ui-select-choices repeat="world in shipMan.tripData.arrivalWorlds | filter: {Name: $select.search}">
                  <span ng-bind-html="world.Name | highlight: $select.search"></span>
                </ui-select-choices>
              </ui-select>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12" ng-if="shipMan.tripData.departureWorldSearchResults" style="margin-top:5px">
              <a href="http://travellermap.com/?scale=64&sx={{shipMan.tripData.departureWorldSearchResults.World.SectorX}}&sy={{shipMan.tripData.departureWorldSearchResults.World.SectorY}}&hx={{shipMan.tripData.departureWorldSearchResults.World.HexX}}&hy={{shipMan.tripData.departureWorldSearchResults.World.HexY}}" target="_blank">
                <img class="center-block" ng-src="http://travellermap.com/api/jumpmap?sx={{shipMan.tripData.departureWorldSearchResults.World.SectorX}}&sy={{shipMan.tripData.departureWorldSearchResults.World.SectorY}}&hx={{shipMan.tripData.departureWorldSearchResults.World.HexX}}&hy={{shipMan.tripData.departureWorldSearchResults.World.HexY}}&jump=4&scale=48">
              </a>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12" style="margin-top:5px">
              <!-- outer accordion -->
              <uib-accordion close-others="false">
                <!-- loop through all steps -->
                <div ng-repeat="step in shipMan.accordionData" style="margin-top:5px">
                  <!-- step-specific accordion group -->
                  <uib-accordion-group>
                    <uib-accordion-heading>{{step.name}}</uib-accordion-heading>
                    <div ng-if="step.subSteps"> <!-- step has substeps -->
                      <!-- inner accordion for substeps -->
                      <uib-accordion close-others="false">
                        <!-- loop through all substeps -->
                        <div ng-repeat="subStep in step.subSteps" style="margin-top:5px">
                          <!-- substep-specific accordion group -->
                          <uib-accordion-group>
                            <uib-accordion-heading>{{subStep.name}}</uib-accordion-heading>
                            <div ng-if="subStep.htmlTemplate">
                              <ng-include src="subStep.htmlTemplate"></ng-include>
                            </div>
                          </uib-accordion-group>
                        </div>
                      </uib-accordion>
                    </div>
                    <div ng-if="step.htmlTemplate"> <!-- step has html -->
                      <ng-include src="step.htmlTemplate"></ng-include>
                    </div>
                  </uib-accordion-group>
                </div>
              </uib-accordion>
            </div>
          </div>

        </div>
        
        <div class="col-md-3">
          Today: {{shipMan.log.status.date.toString();}}
          <br>
          Ship's log
          <ul class="list-group">
            <li class="list-group-item" ng-repeat="logitem in shipMan.log.entries track by $index">
              <span> {{logitem.year}}:{{logitem.startDate}} - {{logitem.text}} - {{logitem.elapsed}} days </span>
            </li>
          </ul>
        </div>

      </div>

    </div>

  </script>

<!------------------------------ Character view ------------------------------->

  <!------------------ Add Trade Skill Modal ------------------>
  <script type="text/ng-template" id="addTradeSkillModal.view">
    <div class="modal-header">
      <h4 class="modal-title">Add a trade skill</h4>
    </div>
    <div class="modal-body">
      <input ng-model="newTradeSkillName" autoFocus></input>
    </div>
    <div class="modal-footer">
      <button class="btn btn-success" type="button" ng-click="addTradeSkillModalOk()">Add</button>
      <button class="btn btn-default" type="button" ng-click="addTradeSkillModalCancel()">Cancel</button>
    </div>
  </script>

  <!---------------- Delete Trade Skill Modal ----------------->
  <script type="text/ng-template" id="deleteTradeSkillModal.view">
    <div class="modal-header">
      <h4 class="modal-title">Delete a trade skill</h4>
    </div>
    <div class="modal-body">
      <select ng-model="selectedSkill" ng-options="tradeSkill.skill.name for tradeSkill in tradeSkills"></select>
    </div>
    <div class="modal-footer">
      <button class="btn btn-danger" type="button" ng-click="deleteTradeSkillModalOk()">Delete</button>
      <button class="btn btn-default" type="button" ng-click="deleteTradeSkillModalCancel()">Cancel</button>
    </div>
  </script>

  <!------------------- Main Character View ------------------->
  <script type="text/ng-template" id="characters.view">
    <div class="btn-group" uib-dropdown style="float:right;margin-right:20px">
      <button id="charMgmtButton" type="button" class="btn btn-primary" uib-dropdown-toggle>Character Management<span class="caret"></span></button>
      <ul class="uib-dropdown-menu dropDownMenu" role="menu" aria-labelledby="charMgmtButton" id="charMgmtMenu">
        <li><span ng-click="addCharacter()">Create New</span></li>
        <li><span class="fileChooser">Import<input type="file" onchange="angular.element(this).scope().importCharacter(angular.element(this))"></span></li>
        <li><span ng-click="exportAll()">Export</span></li>
      </ul>
    </div>

    <br><br>

    <uib-tabset>
      <uib-tab ng-repeat="character in characterList" heading="{{character.name}}" active="charTabActive[$index]" ng-click="selectCharacter($index)"></uib-tab>
    </uib-tabset>

    <span ng-if="characterList.length > 0"> <!-- Hide the character display if no characters exist -->

      <form>
        <h3>Identity</h3>
        <span class="deleteButton" ng-click="deleteCharacter(indexOfSelectedChar)" style="font-weight:bold">DELETE</span>
        <table id="identityTable">
          <tr><td>Name</td><td><input ng-model="selectedCharacter.name"></td></tr>
          <tr><td>Age</td><td><input ng-model="selectedCharacter.age"></td></tr>
          <tr><td>Homeworld</td><td><input ng-model="selectedCharacter.homeworld"></td></tr>
          <tr><td>Race</td><td><input ng-model="selectedCharacter.race"></td></tr>
          <tr><td>Racial Traits</td><td><input ng-model="selectedCharacter.racialTraits"></td></tr>
        </table>
      </form>

      <h3>Characteristics</h3>
      Click on a box to set the characteristic score
      <table id="characteristicsTable">
          <colgroup>
              <col><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col><col>
          </colgroup>
          <tr align=center>
              <td align=right>Modifier</td>
              <td>-3</td><td colspan=2>-2</td><td colspan=3>-1</td><td colspan=3>+0</td><td colspan=3>+1</td><td colspan=3>+2</td>
              <td>+3</td>
          </tr>
          <tr align=center>
              <td align=right>Score</td>
              <td ng-repeat='val in [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]'>{{val}}</td>
          </tr>
          <tr align=center ng-repeat="characteristic in characteristics | orderBy: 'order'">
              <td align=right>{{characteristic.name}}</td>
              <td ng-repeat='val in [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]' style="cursor:pointer" ng-click="selectedCharacter[characteristic.name]=val" ng-class="{bgDimGray: selectedCharacter[characteristic.name]>=val}"></td>
          </tr>
      </table>

      <br>
      <form>
        <h3>Armour</h3>
        <table id="armorTable">
          <tr><td>Type</td><td><input ng-model="selectedCharacter.armourType"></td></tr>
          <tr><td>Rating</td><td><input ng-model="selectedCharacter.armourRating"></td></tr>
          <tr><td>Special Notes</td><td><input ng-model="selectedCharacter.armourSpecialNotes"></td></tr>
        </table>
      </form>

      <form>
        <h3>Skills</h3>
        Click on a skill to learn/forget it. Click on the skill level to change it. Trade skills can be added or removed using the Skill Management button.
        <div class="btn-group" uib-dropdown style="float:right;margin-right:20px">
          <button id="skillMgmtButton" type="button" class="btn btn-primary" uib-dropdown-toggle>Skill Management<span class="caret"></span></button>
          <ul class="uib-dropdown-menu dropDownMenu" role="menu" aria-labelledby="skillMgmtButton" id="skillMgmtMenu">
            <li><span ng-click="openAddTradeSkillModal()">New Trade Skill</span></li>
            <li ng-if="selectedCharacter.skills.numTradeSkills"><span ng-click="openDeleteTradeSkillModal()">Delete Trade Skill</span></li>
            <li ng-if="!selectedCharacter.skills.numTradeSkills"><span class="dropDownMenuDisabled">Delete Trade Skill</span></li>
          </ul>
        </div>
        <table id="skillsTable">
          <tr ng-repeat="skill in skills.skillList | skillSorter" ng-if="skill.displayMe()" ng-class="{learnedSkill: skill.hasBeenLearned}">
            <td><span ng-class="getSkillClass(skill)" ng-click="skills.toggleSkill(skill)">{{skill.name}}</span></td>
            <td ng-if="skill.showValue()">
              <input ng-if="skillValueBeingEdited(skill)" traveller-autofocus class="skillValueInput" id="{{skill.name}}" type="number" min="0" max="20" value="{{skill.value}}" ng-model="skill.value" ng-blur="skillValueEditingComplete(skill)">
              <span ng-if="!skillValueBeingEdited(skill)" class="skillValue" ng-click="editSkillValue(skill)" style="font-weight:bold">{{skill.value}}</span>
            </td>
            <td ng-if="!skill.showValue()"></td> <!-- else case for previous ng-if so we still have enough cells on unlearned or parent rows -->
          </tr>
        </table>
      </form>

      <form>
          <h3>Finances</h3>
          <table id="financesTable">
              <col><col>
              <tr><td>Pension</td><td>Cr. <input type="number" class="moneyInput" step="2000" min="10000" ng-model="selectedCharacter.pension"></td></tr>
              <tr><td>Debt</td><td>Cr. <input type="number" class="moneyInput" min="0" ng-model="selectedCharacter.debt"></td></tr>
              <tr><td>Cash on Hand</td><td>Cr. <input type="number" class="moneyInput" min="0" ng-model="selectedCharacter.cashOnHand"></td></tr>
              <tr><td>Monthly Ship Payment</td><td>Cr. <input type="number" class="moneyInput" min="0" ng-model="selectedCharacter.monthlyShipPayment"></td></tr>
          </table>
      </form>

      <form>
        <h3>Equipment<h3>
        <table id="equipmentTable">
        </table>
      </form>

    </span>

  </script>

<!----------------------------------Table Roller View-------------------------->
  <script type="text/ng-template" id="randomtables.view">
    <br><br>
    <h2>Random Stuff</h2>
    <div class="btn-group" uib-dropdown style="float:top">
      <button id="randomPatronButton" type="button" class="btn btn-primary" uib-dropdown-toggle>Random patron<span class="caret"></span></button>
      <ul class="uib-dropdown-menu dropDownMenu" role="menu" aria-labelledby="randomButton" id="randomPatronMenu">
        <li><span ng-click="tables.randomPatron(0)">Random Patron</span></li>
        <li><span ng-click="tables.randomPatron(1)">Criminals</span></li>
        <li><span ng-click="tables.randomPatron(2)">Leaders</span></li>
        <li><span ng-click="tables.randomPatron(3)">High Society</span></li>
        <li><span ng-click="tables.randomPatron(4)">Commercial</span></li>
        <li><span ng-click="tables.randomPatron(5)">Spacer</span></li>
        <li><span ng-click="tables.randomPatron(6)">Unusual</span></li>
      </ul>

      <br>
      <br>
      <div>Patron: {{tables.patrontype}}, {{tables.patronoccupation}}, {{tables.patrontraits}}</div>
      <div>Mission: {{tables.patronmissiontext}}</div>
      <div>Target: {{tables.patrontargettext}}</div>
      <div>Opposition: {{tables.patronopposition}}</div>

    </div>

    <div class="btn-group" uib-dropdown style="float:top">
      <button id="randomEncounterButton" type="button" class="btn btn-primary" uib-dropdown-toggle>Random Encounter<span class="caret"></span></button>
      <ul class="uib-dropdown-menu dropDownMenu" role="menu" aria-labelledby="randomButton" id="randomEncounterMenu">
        <li><span ng-click="tables.randomEncounter(0)">StarportEncountersTable</span></li>
        <li><span ng-click="tables.randomEncounter(1)">RuralEncountersTable</span></li>
        <li><span ng-click="tables.randomEncounter(2)">UrbanEncountersTable</span></li>
      </ul>

      <br>

      <div>Encounter: {{tables.encountertext}}</div>

    </div>


  </script>


<!----------------------------------Roller View-------------------------->

<script type="text/ng-template" id="roll.view">
  <br><br>
  <h2>Roll</h2>
        <div>

         <form ng-submit="roller.roll()" class="form-inline">
               <input type="text"  class="form-control" ng-model="roller.numdice" size="1" placeholder="Count">
               d<input type="text" class="form-control" ng-model="roller.sides" size="1" placeholder="Sides">
               <input class="btn btn-default btn-primary" type="submit" value="Roll">
            </form>

            <form ng-submit="roller.d66()">
            <input class="btn btn-default btn-primary" type="submit" value="d66">
            </form>

            <span>Total: {{roller.result.total}}</span>
            <br>

        <span>Individual Rolls:</span>
        <ul class="list-group">
         <li class="list-group-item" ng-repeat="roll in roller.result.rolls track by $index">
         <span> {{roll}} </span>
         </li>
        </ul>

        <h2>Throw/Check</h2>
        <Table class="table table-condensed">
            <tr ng-repeat="dm in roller.dms" {{dm.include?'':'disabled'}}>
              <td><input type="checkbox" ng-model="dm.include"></td>
              <td><span>{{dm.desc}}</span></td>
              <td class="{{dm.value>=0?'info':'warning'}}"><span class="">{{dm.value}}</span></td>
            </tr>
          </table>
          <form ng-submit="roller.addDM()" class="form-inline">
            <input type="text"  ng-model="roller.dmtext"  size="30" class="form-control"
                   placeholder="add new DM description">
            <input type="number" class="sr" ng-model="roller.dmvalue"  size="3" class="form-control"
                   placeholder="0">
            <input class="btn btn-default btn-primary" type="submit" value="add">
          </form>


         <form ng-submit="roller.dicethrow()" class="form-inline">

         <!--  <select ng-model="roller.currentdifficulty">
            <option ng-repeat="option in roller.difficulties" value="{{option.value}}">{{option.name}}</option>
         -->
         <select name="mySelect" id="mySelect"
             ng-options="option.name for option in roller.difficulties track by option.value"
               ng-model="roller.currentdifficulty"></select>
         <input class="btn btn-default btn-primary" type="submit" value="Throw">
         </form>
         <form ng-submit="roller.clearThrows()" class="form-inline">
            <input class="btn btn-default btn-primary" type="submit" value="Clear Throws">
            </form>
         Throw Result:
         <ol class="list-group">
            <li class="list-group-item" ng-repeat="throwresult in roller.throwresults">
            <button type="button" class="btn btn-{{throwresult.color}}" data-placement="top-right" title="{{throwresult.desc}}"
            data-content="{{throwresult.effect}}" data-trigger="focus" bs-popover>{{throwresult.desc}}<br>
  <small>Timing:{{throwresult.timing}}</small>
</button>
            </li>
         </ol>
        </div>

    <!-- Skill Check DM Test -->
    <br><br>
    <trav-skill-check-dm ng-model="dmResult"></trav-skill-check-dm>
    <br>
    <span ng-if="dmResult && dmResult.character && dmResult.roll">{{dmResult.character.name}} rolled a {{dmResult.roll.summary}}.</span>
  </script>

<!-------------------------- Skill Check DM Template -------------------------->
  <script type="text/ng-template" id="travellerSkillDm.view">
    <div style="padding:10px;border:1px solid black;width:421px">
      <ui-select on-select="skillChanged()" on-remove="skillChanged()" theme="bootstrap" ng-model="selected.skill" ng-disabled="locked.skills" style="width:400px;margin-right:5px;margin-bottom:10px">
        <ui-select-match placeholder="Select skill...">{{$select.selected.nameIncludingParent}}</ui-select-match>
        <ui-select-choices repeat="skill in selectableSkills | filter: {nameIncludingParent: $select.search}">
          <span ng-bind-html="skill.nameIncludingParent | highlight: $select.search"></span>
        </ui-select-choices>
      </ui-select>
      <table style="margin-bottom:10px">
        <tr>
          <td style="padding-right:5px">
            <ui-select multiple on-select="updateCharList()" on-remove="updateCharList()" theme="bootstrap" ng-model="selected.characteristics" ng-disabled="locked.characteristics" style="width:250px;margin-right:5px">
              <ui-select-match placeholder="Select characteristics...">{{$item.name}}</ui-select-match>
              <ui-select-choices repeat="characteristic in selectableCharacteristics | filter: {name: $select.search}">
                <span ng-bind-html="characteristic.name | highlight: $select.search"></span>
              </ui-select-choices>
            </ui-select>
          </td>
          <td>
            <ui-select on-select="updateCharList()" on-remove="updateCharList()" theme="bootstrap" ng-model="selected.difficulty" ng-disabled="locked.difficulty" style="width:139px;margin-right:5px">
              <ui-select-match placeholder="Select difficulty...">{{$select.selected.name}}</ui-select-match>
              <ui-select-choices repeat="difficulty in selectableDifficulties | filter: {name: $select.search}">
                <span ng-bind-html="difficulty.name | highlight: $select.search"></span>
              </ui-select-choices>
            </ui-select>
          </td>
        </tr>
      </table>
      <table>
        <tr>
          <td>
            <ui-select multiple on-select="updateCharList()" on-remove="updateCharList()" theme="bootstrap" ng-model="selected.extFactors" style="width:359px;margin-right:5px">
              <ui-select-match ui-lock-choice="extFactorLocked($item)" placeholder="Select external factors...">{{$item.externalFactor}}: {{$item.value}}</ui-select-match>
              <ui-select-choices repeat="factor in externalFactors[selected.skill.name] | filter: {externalFactor: $select.search}">
                <span ng-bind-html="factor.externalFactor | highlight: $select.search"></span>: {{factor.value}}
              </ui-select-choices>
            </ui-select>
          </td>
          <td>
            <button type="button" ng-disabled="!selected.skill" class="btn btn-sm" ng-click="openAddExtFactorModal(selected.skill)" style="margin-right:5px"><span class="glyphicon glyphicon-plus"></span></button>
          </td>
        </tr>
      </table>
      <style>
        table.resultsTable tr td {
           cursor:pointer;
           padding:2px;
        }
        table.resultsTable tr:hover td {
           background-color:WhiteSmoke;
        }
      </style>
      <table style="margin-top:10px">
        <tr>
          <td width=100%>
            <table ng-if="results && results.length" class="resultsTable">
              <tr><th colspan="3" style="padding-bottom:2px">Select a character:</th></tr>
              <tr ng-repeat="result in results" ng-click="selectCharToRoll($index)">
                <td style="padding-left:20px;padding-right:10px">{{result.character.name}}</td>
                <td style="padding-right:10px;text-align:right">{{result.dm}}</td>
                <td><span ng-if="$index === selectedCharacterIndex" class="glyphicon glyphicon-arrow-left" aria-hidden="true" style="color:green"></span></td>
              </tr>
            </table>
          </td>
          <td style="vertical-align:top;text-align:right">
            <button ng-disabled="!allowRoll()" type="button" class="btn btn-primary" style="margin-bottom:5px" ng-click="roll()">Roll</button>
            <button type="button" class="btn btn-danger" ng-click="clearSelections()">Clear</button>
          </td>
        </tr>
      </table>
    </div>
  </script>

  <!------------- Add Skill External Factor Modal ------------->
  <script type="text/ng-template" id="addExtFactorModal.view">
    <div class="modal-header">
      <h4 class="modal-title">Add an external factor to {{skillNameIncludingParent}}</h4>
    </div>
    <div class="modal-body row">
      <div class="row">
        <div class="col-md-9"><span style="margin-left:5px">Name:</span><input style="margin-left:5px;margin-bottom:10px;width:350px" ng-model="newExternalFactorName" autoFocus></input></div>
        <div class="col-md-3"><span style="margin-left:5px">Value:</span><input style="margin-left:5px;width:40px" ng-model="newExternalFactorValue" type="number"></input></div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-success" type="button" ng-click="addExtFactorModalOk()">Add</button>
      <button class="btn btn-default" type="button" ng-click="addExtFactorModalCancel()">Cancel</button>
    </div>
  </script>

<!----------------------------------Ref View-------------------------->
  <script type="text/ng-template" id="Ref.view">
    <br><br>
    <h2>Referee Section</h2>

  </script>

<!----------------------------------Player Secrets View-------------------------->
  <script type="text/ng-template" id="decoder.view">
    <br><br>
    <h2>Hidden stuff and decoder ring</h2>
  <uib-accordion close-others="True">
    <uib-accordion-group heading="Decoder" is-open="status.isFirstOpen">
            <form ng-submit="decoder.whydecode()" class="form-inline">
               <input type="textarea"  class="form-control" ng-model="decoder.input" size="100" placeholder="Encoded data goes here">
               <input type="text" class="form-control" ng-model="decoder.key" size="20" placeholder="Secret Key">
               <input class="btn btn-default btn-primary" type="submit" value="Decode">
            </form>
         <button ng-click="decoder.whyencode()">ENCODE</button>

         <h3> Output: </h3>
         <div><pre>{{decoder.result}}</pre></div>
    </uib-accordion-group>
    <uib-accordion-group heading="Epic" >
        <pre>
The task force left Vanejen with a cargo of pharmaceuticals for Regina.
It consisted of four ships: three scouts and a transport.
The transport Gyro Cadiz was a remade subsidized merchant, fitted with long range tanks. One scout, the Blatant Lie, was a mobilized half-pay courier with a crew of three. Another, the Carlisle, was a sleek new ship with a freshly trained crew.
The last, Black Gold, was a ringer; a courier with a crew of malice and mold.
The route we took was circuitous, intended to avoid Zhodani patrols.
A few times, the group even jumped to deep space and then again to a world beyond.
I fell sick at Rhylanor, and laid in bunk through weeks of suffering.
When I recovered, we were stepping out of jump space to refuel at a world below.
It was safer to refuel from an ocean; fewer Zhodani would be there, if they were anywhere. And there we still met disaster. An ion storm from the star flared as we came in.
The Gyro Cadiz was forced to land, and it landed badly.
The other ships scattered across many kilometers, with only the traitors near.
Carlisle crashed, and Blatant Lie went to its aid. In that time, the blackguards made their move. When Blatant Lie reappeared with Carlisle's crew aboard, Gyro was under fire from Black Gold. The battle ensued, for hours.
Ultimately, the battle was too intense, and Blatant Lie landed behind a hill, damaged.
Black Gold had further crippled Gyro Cadiz, and was killing her,
However, the hero crew had a plan.
While Gyro drew the traitors' fire (already doing so admirably),
the crew of Carlisle dragged four missiles to the hilltop,
and the crew of Blatant Lie maneuvered around the crags.
In coordinated action, they blasted the traitors and saved their comrades. One traitor survived, and recounted their story.
They were impostors, with a hijacked scout and false identities.
They had sabotaged the transport, and were in it for the black-market money. He died as he spoke, painfully and slowly.
Surveying the results, the crews found that nothing would now fly,
Not Gyro, not Blatant Lie, not Black Gold.
Certainly not Carlisle, lying 600 kilometers distant.
They were marooned.


A ray of hope emerged.
Salvage of parts form some ships could make at least one work.
Parts from Black Gold, from Gyro Cadiz, even from Carlisle could make Blatant Lie fly again. They mounted an expedition to Carlisle, overland, covering 600 kilometers.
They first installed a crew in Gyro Cadiz to guard it; the rest trekked overland, 600 kilometers. One died along the way.
Another died on the way back.
But they carried some parts back. Not enough.
The Gyro crew computer-predicted a long, bad, winter season.
Not enough time to make another trip. They had to hole up.
Together they had glimpsed a structure momentarily along the way.
On a high peak, viewed in twilight, it promised shelter.
Trekking to it, they found a tall octagon built of fine-hewn stones.
High on a crag in a valley.
Moving the fusion heater and crates of rations to it, they settled in for winter.
Snow and ice hemmed them in.
Water was easy to get, melted from snow.
Wolves growled at the doors, and even at the windows from atop the snow drifts.
But they survived. They even killed wolves and ate them for food.
Almost, they went crazy. Tempers flared.
And the wolves beat at the doors and windows.
Once, snow on the roof threatened to collapse it.
But they shovelled it away to save their lives, and patched the holes.
Late in the winter, the wolves attacked again,
And the group retreated, leaving the second floor to wolves streaming in through the windows. They blocked the shaft of the fireplace, and held them off for a while.
They moved the fusion heater to hold them back, and discovered the passage leading down. Two floors stood below; large octagonal rooms with buttresses at the eight corners.
They hid there at night, trusting to stone to protect them from wolves.
On t h e lowest floor, they found mystic writing, to a base number eight.
And a central altar with human bones.


Magically, a passage down appeared, with stairs leading to the bowels of the world.
They followed the stairs down.
Down countless flights of stairs, past rooms of mystery, finally to a well of running water.
Past that well to a long corridor, to another level, to a huge vault door.
As they stood, a quake shook the chamber; as they cowered, the door swung open.
To reveal a magic bridge of light across a vast underground river cavern.
Beyond stood a warren of rooms of silver and gold, each different, each with fantastic artifacts. Leaning against the wall, a hidden switch was apparently tripped,
And suddenly, the floor glowed orange.
One person lost a finger-tip when he touched it.
Another hidden switch was tripped— and holographic visions of food appeared as mirages to Tantalize the famished crews.
One gave in to temptation, and clawed his way into the vision.
Whereupon it materialized, as real meat, real fruit, and real drink.
Other rooms held null-G sleeping berths, areas with mystic columns for no apparent purpose, Or fabulous crystal eggs larger than six people.
In the farthest back room, a huge globe of the world stood and revolved in real-time.
It responded to their touch, and (by looking close) they could see where they had landed.
The stayed in the rooms, warm and away from the wolves and cold of the surface, for days. But nowhere was there anything to carry away, nor to help in their plight.
They turned back, only to find the magic bridge of light gone and the vault door closed.
They rigged ropes and slings and swung four of their six across before the bridge clicked on. To allow the remaining two to just walk across the chasm.
As they did, the bridge turned red, and turned off again just as the last stepped off it.
As they sighed relief, the vault door swung open, and they left hurriedly.
Many times they came back, but never again did the door open.


In spring, they mounted another expedition to the crashed Carlisle, and salvaged parts. They fixed Blatant Lie enough to jump, and three were chosen to make the voyage.
It jumped and stuttered through the system and finally made a single hop.
And came out in the wrong place.
A battle raged in the system, and as the ships fought,
The Blatant Lie hid, hoping its side would win.
One torpedo from the fighting never hit a target, and streamed on alone, until it caught Blatant Lie in its sensors and moved closer, exploding to blank the scout's screens.
And disable its drives.
Without drives, the ship could not maneuver, and no one heard its calls for help.
The belligerents left, first one side retreating, then the other pursuing.
Left alone, the scout and its heroic crew settled into the vacuous night and died.
</pre>
    </uib-accordion-group>
    <uib-accordion-group heading="Book" >
     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

    </uib-accordion-group>

  </uib-accordion>


  </script>

<!-------------------------------- Config View -------------------------------->
  <script type="text/ng-template" id="config.view">
    <br><br>
    <span class="btn btn-primary" type="button" ng-click="exportAll()">Export All</span>
    <span class="btn btn-primary fileChooser">Import All<input type="file" onchange="angular.element(this).scope().importAll(angular.element(this))"></span>
  </script>
</html>

